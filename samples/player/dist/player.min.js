/*! player - v0.1.0 - 2012-10-24
* https://github.com/Hyvi/dbank-php-sdk
* Copyright (c) 2012 Hyvi; Licensed MIT */
function play(a,b,c){var d={m:"jsonp",jsoncallback:"_jqjsp"},e={};e.success=function(a){if(a.retcode==="0000"){var d,e=b;if(e==="audio"){var f=new buzz.sound(a.url);f.play()}e==="qt"?d='<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab"> <param name="src" value="${video_src}"><param name="controller" value="true"> </object>':e==="html5"?d='<video  controls="controls"> <source src="${video_src}" type="video/mp4"> <source src="${video_src}" type="video/ogg"> <source src="${video_src}" type="video/webm"> Your browser does not support the video tag.  </video>':e==="swf"?d='<object  classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/ pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0"> <param name="SRC" value="${video_src}"> <embed src="${video_src}" > </embed> </object>':e==="mp"&&(d='<object width="100%" height="100%" type="video/x-ms-asf" url="${video_src}" data="${video_src}" classid="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6"> <param name="url" value="${video_src}"> <param name="filename" value="${video_src}"> <param name="autostart" value="1"> <param name="uiMode" value="full"><param name="autosize" value="1"> <param name="playcount" value="1"> <embed type="application/x-mplayer2" src="${video_src}" width="100%" height="100%" autostart="true" showcontrols="true" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/"></embed> </object>'),d=d.replace(/\$\{video_src\}/gi,a.url),c||(c="inlinevideo"),document.getElementById(c).innerHTML=d}},D.jsonp({url:a,data:d,dataType:"jsonp",timeout:3e4,success:e.success,pageCache:!0,error:e.error})}var buzz={defaults:{autoplay:!1,duration:5e3,formats:[],loop:!1,placeholder:"--",preload:"metadata",volume:80},types:{mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",aac:"audio/aac",m4a:"audio/x-m4a"},sounds:[],el:document.createElement("audio"),sound:function(a,b){function g(a){var b=[],c=a.length-1;for(var d=0;d<=c;d++)b.push({start:a.start(c),end:a.end(c)});return b}function h(a){return a.split(".").pop()}function i(a,b){var c=document.createElement("source");c.src=b,buzz.types[h(b)]&&(c.type=buzz.types[h(b)]),a.appendChild(c)}b=b||{};var c=0,d=[],e={},f=buzz.isSupported();this.load=function(){return f?(this.sound.load(),this):this},this.play=function(){return f?(this.sound.play(),this):this},this.togglePlay=function(){return f?(this.sound.paused?this.sound.play():this.sound.pause(),this):this},this.pause=function(){return f?(this.sound.pause(),this):this},this.isPaused=function(){return f?this.sound.paused:null},this.stop=function(){return f?(this.setTime(this.getDuration()),this.sound.pause(),this):this},this.isEnded=function(){return f?this.sound.ended:null},this.loop=function(){return f?(this.sound.loop="loop",this.bind("ended.buzzloop",function(){this.currentTime=0,this.play()}),this):this},this.unloop=function(){return f?(this.sound.removeAttribute("loop"),this.unbind("ended.buzzloop"),this):this},this.mute=function(){return f?(this.sound.muted=!0,this):this},this.unmute=function(){return f?(this.sound.muted=!1,this):this},this.toggleMute=function(){return f?(this.sound.muted=!this.sound.muted,this):this},this.isMuted=function(){return f?this.sound.muted:null},this.setVolume=function(a){return f?(a<0&&(a=0),a>100&&(a=100),this.volume=a,this.sound.volume=a/100,this):this},this.getVolume=function(){return f?this.volume:this},this.increaseVolume=function(a){return this.setVolume(this.volume+(a||1))},this.decreaseVolume=function(a){return this.setVolume(this.volume-(a||1))},this.setTime=function(a){return f?(this.whenReady(function(){this.sound.currentTime=a}),this):this},this.getTime=function(){if(!f)return null;var a=Math.round(this.sound.currentTime*100)/100;return isNaN(a)?buzz.defaults.placeholder:a},this.setPercent=function(a){return f?this.setTime(buzz.fromPercent(a,this.sound.duration)):this},this.getPercent=function(){if(!f)return null;var a=Math.round(buzz.toPercent(this.sound.currentTime,this.sound.duration));return isNaN(a)?buzz.defaults.placeholder:a},this.setSpeed=function(a){if(!f)return this;this.sound.playbackRate=a},this.getSpeed=function(){return f?this.sound.playbackRate:null},this.getDuration=function(){if(!f)return null;var a=Math.round(this.sound.duration*100)/100;return isNaN(a)?buzz.defaults.placeholder:a},this.getPlayed=function(){return f?g(this.sound.played):null},this.getBuffered=function(){return f?g(this.sound.buffered):null},this.getSeekable=function(){return f?g(this.sound.seekable):null},this.getErrorCode=function(){return f&&this.sound.error?this.sound.error.code:0},this.getErrorMessage=function(){if(!f)return null;switch(this.getErrorCode()){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return null}},this.getStateCode=function(){return f?this.sound.readyState:null},this.getStateMessage=function(){if(!f)return null;switch(this.getStateCode()){case 0:return"HAVE_NOTHING";case 1:return"HAVE_METADATA";case 2:return"HAVE_CURRENT_DATA";case 3:return"HAVE_FUTURE_DATA";case 4:return"HAVE_ENOUGH_DATA";default:return null}},this.getNetworkStateCode=function(){return f?this.sound.networkState:null},this.getNetworkStateMessage=function(){if(!f)return null;switch(this.getNetworkStateCode()){case 0:return"NETWORK_EMPTY";case 1:return"NETWORK_IDLE";case 2:return"NETWORK_LOADING";case 3:return"NETWORK_NO_SOURCE";default:return null}},this.set=function(a,b){return f?(this.sound[a]=b,this):this},this.get=function(a){return f?a?this.sound[a]:this.sound:null},this.bind=function(a,b){if(!f)return this;a=a.split(" ");var c=this,e=function(a){b.call(c,a)};for(var g=0;g<a.length;g++){var h=a[g],i=h;h=i.split(".")[0],d.push({idx:i,func:e}),this.sound.addEventListener(h,e,!0)}return this},this.unbind=function(a){if(!f)return this;a=a.split(" ");for(var b=0;b<a.length;b++){var c=a[b],e=c.split(".")[0];for(var g=0;g<d.length;g++){var h=d[g].idx.split(".");if(d[g].idx==c||h[1]&&h[1]==c.replace(".",""))this.sound.removeEventListener(e,d[g].func,!0),d.splice(g,1)}}return this},this.bindOnce=function(a,b){if(!f)return this;var d=this;e[c++]=!1,this.bind(c+a,function(){e[c]||(e[c]=!0,b.call(d)),d.unbind(c+a)})},this.trigger=function(a){if(!f)return this;a=a.split(" ");for(var b=0;b<a.length;b++){var c=a[b];for(var e=0;e<d.length;e++){var g=d[e].idx.split(".");if(d[e].idx==c||g[0]&&g[0]==c.replace(".","")){var h=document.createEvent("HTMLEvents");h.initEvent(g[0],!1,!0),this.sound.dispatchEvent(h)}}}return this},this.fadeTo=function(a,b,c){function h(){setTimeout(function(){d<a&&g.volume<a?(g.setVolume(g.volume+=1),h()):d>a&&g.volume>a?(g.setVolume(g.volume-=1),h()):c instanceof Function&&c.apply(g)},e)}if(!f)return this;b instanceof Function?(c=b,b=buzz.defaults.duration):b=b||buzz.defaults.duration;var d=this.volume,e=b/Math.abs(d-a),g=this;return this.play(),this.whenReady(function(){h()}),this},this.fadeIn=function(a,b){return f?this.setVolume(0).fadeTo(100,a,b):this},this.fadeOut=function(a,b){return f?this.fadeTo(0,a,b):this},this.fadeWith=function(a,b){return f?(this.fadeOut(b,function(){this.stop()}),a.play().fadeIn(b),this):this},this.whenReady=function(a){if(!f)return null;var b=this;this.sound.readyState===0?this.bind("canplay.buzzwhenready",function(){a.call(b)}):a.call(b)};if(f&&a){for(var j in buzz.defaults)buzz.defaults.hasOwnProperty(j)&&(b[j]=b[j]||buzz.defaults[j]);this.sound=document.createElement("audio");if(a instanceof Array)for(var k in a)a.hasOwnProperty(k)&&i(this.sound,a[k]);else if(b.formats.length)for(var l in b.formats)b.formats.hasOwnProperty(l)&&i(this.sound,a+"."+b.formats[l]);else i(this.sound,a);b.loop&&this.loop(),b.autoplay&&(this.sound.autoplay="autoplay"),b.preload===!0?this.sound.preload="auto":b.preload===!1?this.sound.preload="none":this.sound.preload=b.preload,this.setVolume(b.volume),buzz.sounds.push(this)}},group:function(a){function b(){var b=c(null,arguments),d=b.shift();for(var e=0;e<a.length;e++)a[e][d].apply(a[e],b)}function c(a,b){return a instanceof Array?a:Array.prototype.slice.call(b)}a=c(a,arguments),this.getSounds=function(){return a},this.add=function(b){b=c(b,arguments);for(var d=0;d<b.length;d++)a.push(b[d])},this.remove=function(b){b=c(b,arguments);for(var d=0;d<b.length;d++)for(var e=0;e<a.length;e++)if(a[e]==b[d]){delete a[e];break}},this.load=function(){return b("load"),this},this.play=function(){return b("play"),this},this.togglePlay=function(){return b("togglePlay"),this},this.pause=function(a){return b("pause",a),this},this.stop=function(){return b("stop"),this},this.mute=function(){return b("mute"),this},this.unmute=function(){return b("unmute"),this},this.toggleMute=function(){return b("toggleMute"),this},this.setVolume=function(a){return b("setVolume",a),this},this.increaseVolume=function(a){return b("increaseVolume",a),this},this.decreaseVolume=function(a){return b("decreaseVolume",a),this},this.loop=function(){return b("loop"),this},this.unloop=function(){return b("unloop"),this},this.setTime=function(a){return b("setTime",a),this},this.setduration=function(a){return b("setduration",a),this},this.set=function(a,c){return b("set",a,c),this},this.bind=function(a,c){return b("bind",a,c),this},this.unbind=function(a){return b("unbind",a),this},this.bindOnce=function(a,c){return b("bindOnce",a,c),this},this.trigger=function(a){return b("trigger",a),this},this.fade=function(a,c,d,e){return b("fade",a,c,d,e),this},this.fadeIn=function(a,c){return b("fadeIn",a,c),this},this.fadeOut=function(a,c){return b("fadeOut",a,c),this}},all:function(){return new buzz.group(buzz.sounds)},isSupported:function(){return!!buzz.el.canPlayType},isOGGSupported:function(){return!!buzz.el.canPlayType&&buzz.el.canPlayType('audio/ogg; codecs="vorbis"')},isWAVSupported:function(){return!!buzz.el.canPlayType&&buzz.el.canPlayType('audio/wav; codecs="1"')},isMP3Supported:function(){return!!buzz.el.canPlayType&&buzz.el.canPlayType("audio/mpeg;")},isAACSupported:function(){return!!buzz.el.canPlayType&&(buzz.el.canPlayType("audio/x-m4a;")||buzz.el.canPlayType("audio/aac;"))},toTimer:function(a,b){var c,d,e;return c=Math.floor(a/3600),c=isNaN(c)?"--":c>=10?c:"0"+c,d=b?Math.floor(a/60%60):Math.floor(a/60),d=isNaN(d)?"--":d>=10?d:"0"+d,e=Math.floor(a%60),e=isNaN(e)?"--":e>=10?e:"0"+e,b?c+":"+d+":"+e:d+":"+e},fromTimer:function(a){var b=a.toString().split(":");return b&&b.length==3&&(a=parseInt(b[0],10)*3600+parseInt(b[1],10)*60+parseInt(b[2],10)),b&&b.length==2&&(a=parseInt(b[0],10)*60+parseInt(b[1],10)),a},toPercent:function(a,b,c){var d=Math.pow(10,c||0);return Math.round(a*100/b*d)/d},fromPercent:function(a,b,c){var d=Math.pow(10,c||0);return Math.round(b/100*a*d)/d}},D={};D.type=function(){var a={},b="Boolean Number String Function Array Date RegExp Object".split(" ");for(var c=0;c<b.length;c++)a["[object "+b[c]+"]"]=b[c].toLowerCase();return function(b){return b?a[Object.prototype.toString.call(b)]||"object":String(b)}}(),D.isWindow=function(a){return a&&a==a.window},D.isPlainObject=function(a){var b=Object.prototype.hasOwnProperty;if(!a||D.type(a)!=="object"||a.nodeType||D.isWindow(a))return!1;try{if(a.constructor&&!b.call(a,"constructor")&&!b.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===undefined||b.call(a,d)},D.param=function(a){var b=[],c=function(a,c){c=D.type(c)==="function"?c():c?c:"",b[b.length]=encodeURIComponent(a)+"="+encodeURIComponent(c)};for(var d in a)a.hasOwnProperty(d)&&c(d,a[d]);return b.join("&").replace(/%20/g,"+")},D.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;typeof g=="boolean"&&(j=g,g=arguments[1]||{},h=2),typeof g!="object"&&!D.type(g)==="function"&&(g={}),i===h&&(g=this,--h);for(;h<i;h++)if((a=arguments[h])!=null)for(b in a){c=g[b],d=a[b];if(g===d)continue;j&&d&&(D.isPlainObject(d)||(e=D.type(d)==="array"))?(e?(e=!1,f=c&&D.type(c)==="array"?c:[]):f=c&&D.isPlainObject(c)?c:{},g[b]=D.extend(j,f,d)):d!==undefined&&(g[b]=d)}return g},D.browser=function(){var a,b,c=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}};return a=c(navigator.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),b}(),function(a,b){function c(){}function d(a){z=[a]}function e(a){w.insertBefore(a,w.firstChild)}function f(a,b,c){return a&&a.apply(b.context||b,c)}function g(a){return/\?/.test(a)?"&":"?"}function B(m){function O(a){!(M++)&&b(function(){N(),G&&(x[I]={s:[a]}),C&&(a=C.apply(m,[a])),f(m.success,m,[a,t]),f(B,m,[m,t])},0)}function P(a){!(M++)&&b(function(){N(),G&&a!=u&&(x[I]=a),f(m.error,m,[m,a]),f(B,m,[m,a])},0)}m=a.extend({},A,m);var B=m.complete,C=m.dataFilter,D=m.callbackParameter,E=m.callback,F=m.cache,G=m.pageCache,H=m.charset,I=m.url,J=m.data,K=m.timeout,L,M=0,N=c;return m.abort=function(){!(M++)&&N()},f(m.beforeSend,m,[m])===!1||M?m:(I=I||j,J=J?typeof J=="string"?J:a.param(J,m.traditional):j,I+=J?g(I)+J:j,!F&&!G&&(I+=g(I)+"_"+(new Date).getTime()+"="),G&&(L=x[I])?L.s?O(L.s[0]):P(L):b(function(a,f,g){if(!M){g=K>0&&b(function(){P(u)},K),N=function(){g&&clearTimeout(g),a[q]=a[n]=a[p]=a[o]=null,w[r](a),f&&w[r](f)},window[E]=d,a=document.createElement("script"),a.id=l+y++,H&&(a[i]=H);function j(b){(a[n]||c)(),b=z,z=undefined,b?O(b[0]):P(k)}v.msie?(a.event=n,a.htmlFor=a.id,a[q]=function(){/loaded|complete/.test(a.readyState)&&j()}):(a[o]=a[p]=j,v.opera?(f=document.getElementsByTagName(s)[0]).text="document.getElementById('"+a.id+"')[0]."+o+"()":a[h]=h),a.src=I,e(a),f&&e(f)}},0),m)}var h="async",i="charset",j="",k="error",l="_jqjsp",m="on",n=m+"click",o=m+k,p=m+"load",q=m+"readystatechange",r="removeChild",s="<script/>",t="success",u="timeout",v=a.browser,w=document.getElementsByTagName("head")[0]||document.documentElement,x={},y=0,z,A={callback:l,url:location.href};B.setup=function(b){a.extend(A,b)},a.jsonp=B}(D,setTimeout);